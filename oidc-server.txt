2024-06-06 16:57:19.520 +08:00 [INF] User profile is available. Using 'C:\Users\Administrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-06 16:57:19.611 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-06-06 16:57:19.619 +08:00 [INF] Quartz Scheduler created
2024-06-06 16:57:19.620 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2024-06-06 16:57:19.620 +08:00 [INF] RAMJobStore initialized.
2024-06-06 16:57:19.621 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-06-06 16:57:19.622 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-06-06 16:57:19.624 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-06-06 16:57:19.636 +08:00 [INF] Adding 1 jobs, 1 triggers.
2024-06-06 16:57:19.639 +08:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2024-06-06 16:57:20.886 +08:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-06-06 16:57:20.985 +08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2024-06-06 16:57:21.242 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:57:21.330 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:57:21.332 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:57:21.333 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:57:21.335 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:57:21.352 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2024-06-06 16:57:21.714 +08:00 [INF] Now listening on: https://localhost:44395
2024-06-06 16:57:21.716 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-06 16:57:21.716 +08:00 [INF] Hosting environment: Development
2024-06-06 16:57:21.716 +08:00 [INF] Content root path: D:\Kuriyama\Study\Projects\oidc\OIDC\OpeniddictServer
2024-06-06 16:57:21.719 +08:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2024-06-06 16:57:22.247 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2024-06-06 16:57:22.541 +08:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2024-06-06 16:57:22.550 +08:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2024-06-06 16:57:22.558 +08:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2024-06-06 16:57:22.598 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
ORDER BY [o].[Id]
2024-06-06 16:57:25.597 +08:00 [INF] Executing ViewResult, running view Index.
2024-06-06 16:57:26.589 +08:00 [INF] Executed ViewResult - view Index executed in 3977.4004ms.
2024-06-06 16:57:26.597 +08:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 4038.2802ms
2024-06-06 16:57:26.608 +08:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2024-06-06 16:57:26.620 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 4378.0521ms
2024-06-06 16:57:26.797 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2024-06-06 16:57:26.803 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 13768 application/javascript; charset=utf-8 6.1403ms
2024-06-06 16:57:26.814 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2024-06-06 16:57:26.877 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.2665ms
2024-06-06 16:58:08.943 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2024-06-06 16:58:08.949 +08:00 [INF] CORS policy execution successful.
2024-06-06 16:58:08.954 +08:00 [INF] The request URI matched a server endpoint: "Configuration".
2024-06-06 16:58:08.959 +08:00 [INF] The configuration request was successfully extracted: {}.
2024-06-06 16:58:08.961 +08:00 [INF] The configuration request was successfully validated.
2024-06-06 16:58:08.976 +08:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "form_post",
    "fragment",
    "query"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "authorization_response_iss_parameter_supported": true
}.
2024-06-06 16:58:08.977 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1656 application/json;charset=UTF-8 34.6333ms
2024-06-06 16:58:08.993 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=vueclient&redirect_uri=https%3A%2F%2Flocalhost%3A5173%2Fcallback&response_type=code&scope=openid+profile+email+dataEventRecords+offline_access&state=45f6921ec83a484abd4b4d08199b7bad&code_challenge=sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU&code_challenge_method=S256&display=popup - null null
2024-06-06 16:58:09.004 +08:00 [INF] The request URI matched a server endpoint: "Authorization".
2024-06-06 16:58:09.011 +08:00 [INF] The authorization request was successfully extracted: {
  "client_id": "vueclient",
  "redirect_uri": "https://localhost:5173/callback",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "state": "45f6921ec83a484abd4b4d08199b7bad",
  "code_challenge": "sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU",
  "code_challenge_method": "S256",
  "display": "popup"
}.
2024-06-06 16:58:09.078 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:09.102 +08:00 [INF] The authorization request was successfully validated.
2024-06-06 16:58:09.109 +08:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2024-06-06 16:58:09.109 +08:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2024-06-06 16:58:09.114 +08:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2024-06-06 16:58:09.128 +08:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2024-06-06 16:58:09.133 +08:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2024-06-06 16:58:09.137 +08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2024-06-06 16:58:09.137 +08:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 22.7803ms
2024-06-06 16:58:09.137 +08:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2024-06-06 16:58:09.138 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=vueclient&redirect_uri=https%3A%2F%2Flocalhost%3A5173%2Fcallback&response_type=code&scope=openid+profile+email+dataEventRecords+offline_access&state=45f6921ec83a484abd4b4d08199b7bad&code_challenge=sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU&code_challenge_method=S256&display=popup - 302 0 null 145.0702ms
2024-06-06 16:58:09.146 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dvueclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A5173%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26state%3D45f6921ec83a484abd4b4d08199b7bad%26code_challenge%3DsunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU%26code_challenge_method%3DS256%26display%3Dpopup - null null
2024-06-06 16:58:09.520 +08:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2024-06-06 16:58:09.521 +08:00 [INF] Executing endpoint '/Account/Login'
2024-06-06 16:58:09.685 +08:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2024-06-06 16:58:09.718 +08:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2024-06-06 16:58:09.721 +08:00 [INF] AuthenticationScheme: Identity.External signed out.
2024-06-06 16:58:09.722 +08:00 [INF] Executed handler method OnGetAsync, returned result .
2024-06-06 16:58:09.724 +08:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2024-06-06 16:58:09.724 +08:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2024-06-06 16:58:09.908 +08:00 [INF] Executed page /Account/Login in 222.2176ms
2024-06-06 16:58:09.908 +08:00 [INF] Executed endpoint '/Account/Login'
2024-06-06 16:58:09.909 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dvueclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A5173%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26state%3D45f6921ec83a484abd4b4d08199b7bad%26code_challenge%3DsunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU%26code_challenge_method%3DS256%26display%3Dpopup - 200 null text/html; charset=utf-8 762.8923ms
2024-06-06 16:58:09.969 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2024-06-06 16:58:09.971 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 13768 application/javascript; charset=utf-8 2.2847ms
2024-06-06 16:58:09.992 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2024-06-06 16:58:10.001 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7142ms
2024-06-06 16:58:18.201 +08:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dvueclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A5173%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26state%3D45f6921ec83a484abd4b4d08199b7bad%26code_challenge%3DsunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU%26code_challenge_method%3DS256%26display%3Dpopup - application/x-www-form-urlencoded 286
2024-06-06 16:58:18.205 +08:00 [INF] CORS policy execution failed.
2024-06-06 16:58:18.206 +08:00 [INF] Request origin https://localhost:44395 does not have permission to access the resource.
2024-06-06 16:58:18.207 +08:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2024-06-06 16:58:18.208 +08:00 [INF] Executing endpoint '/Account/Login'
2024-06-06 16:58:18.209 +08:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2024-06-06 16:58:18.220 +08:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2024-06-06 16:58:18.235 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-06-06 16:58:18.370 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-06-06 16:58:18.389 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-06-06 16:58:18.394 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-06-06 16:58:18.395 +08:00 [INF] User logged in.
2024-06-06 16:58:18.396 +08:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2024-06-06 16:58:18.397 +08:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=vueclient&redirect_uri=https%3A%2F%2Flocalhost%3A5173%2Fcallback&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&state=45f6921ec83a484abd4b4d08199b7bad&code_challenge=sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU&code_challenge_method=S256&display=popup.
2024-06-06 16:58:18.398 +08:00 [INF] Executed page /Account/Login in 189.0719ms
2024-06-06 16:58:18.398 +08:00 [INF] Executed endpoint '/Account/Login'
2024-06-06 16:58:18.398 +08:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dvueclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A5173%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26state%3D45f6921ec83a484abd4b4d08199b7bad%26code_challenge%3DsunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU%26code_challenge_method%3DS256%26display%3Dpopup - 302 0 null 197.567ms
2024-06-06 16:58:18.406 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=vueclient&redirect_uri=https%3A%2F%2Flocalhost%3A5173%2Fcallback&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&state=45f6921ec83a484abd4b4d08199b7bad&code_challenge=sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU&code_challenge_method=S256&display=popup - null null
2024-06-06 16:58:18.409 +08:00 [INF] The request URI matched a server endpoint: "Authorization".
2024-06-06 16:58:18.409 +08:00 [INF] The authorization request was successfully extracted: {
  "client_id": "vueclient",
  "redirect_uri": "https://localhost:5173/callback",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "state": "45f6921ec83a484abd4b4d08199b7bad",
  "code_challenge": "sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU",
  "code_challenge_method": "S256",
  "display": "popup"
}.
2024-06-06 16:58:18.412 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:18.416 +08:00 [INF] The authorization request was successfully validated.
2024-06-06 16:58:18.418 +08:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2024-06-06 16:58:18.419 +08:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2024-06-06 16:58:18.438 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2024-06-06 16:58:18.479 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__subject_0='?' (Size = 400), @__status_1='?' (Size = 50), @__type_2='?' (Size = 50), @__key_3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o].[Status] = @__status_1 AND [o].[Type] = @__type_2 AND [o1].[Id] = @__key_3
2024-06-06 16:58:18.515 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-06-06 16:58:18.517 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-06-06 16:58:18.574 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2024-06-06 16:58:18.578 +08:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2024-06-06 16:58:18.723 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2024-06-06 16:58:18.812 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2024-06-06 16:58:18.824 +08:00 [INF] The authorization response was successfully returned to 'https://localhost:5173/callback' using the query response mode: {
  "code": "[redacted]",
  "state": "45f6921ec83a484abd4b4d08199b7bad",
  "iss": "https://localhost:44395/"
}.
2024-06-06 16:58:18.829 +08:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 409.9763ms
2024-06-06 16:58:18.829 +08:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2024-06-06 16:58:18.830 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=vueclient&redirect_uri=https%3A%2F%2Flocalhost%3A5173%2Fcallback&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&state=45f6921ec83a484abd4b4d08199b7bad&code_challenge=sunkpjATG9JEET6aPlQkbc2H8ahgxqmHx_v_o3PphWU&code_challenge_method=S256&display=popup - 302 0 null 423.8824ms
2024-06-06 16:58:19.136 +08:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 264
2024-06-06 16:58:19.137 +08:00 [INF] CORS policy execution successful.
2024-06-06 16:58:19.138 +08:00 [INF] The request URI matched a server endpoint: "Token".
2024-06-06 16:58:19.149 +08:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "redirect_uri": "https://localhost:5173/callback",
  "code": "[redacted]",
  "code_verifier": "c5ed7e3c10584ec08001807d06e6f156ec2bb25c87394eb3a8cfae1052943753d11e645f2e2746eb96bde2329d55b2f9",
  "client_id": "vueclient"
}.
2024-06-06 16:58:19.159 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:19.193 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2024-06-06 16:58:19.390 +08:00 [INF] The token request was successfully validated.
2024-06-06 16:58:19.393 +08:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2024-06-06 16:58:19.395 +08:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2024-06-06 16:58:19.401 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2024-06-06 16:58:19.402 +08:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2024-06-06 16:58:19.406 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2024-06-06 16:58:19.408 +08:00 [INF] The token 'd41cf49b-ad1c-46d4-a9ed-8d4b9fc610c3' was successfully marked as redeemed.
2024-06-06 16:58:19.417 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2024-06-06 16:58:19.422 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2024-06-06 16:58:19.429 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2024-06-06 16:58:19.433 +08:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2024-06-06 16:58:19.435 +08:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 38.9713ms
2024-06-06 16:58:19.435 +08:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2024-06-06 16:58:19.436 +08:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 6158 application/json;charset=UTF-8 300.2838ms
2024-06-06 16:58:21.237 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:44395/.well-known/openid-configuration - null null
2024-06-06 16:58:21.237 +08:00 [INF] The request URI matched a server endpoint: "Configuration".
2024-06-06 16:58:21.238 +08:00 [INF] The configuration request was successfully extracted: {}.
2024-06-06 16:58:21.238 +08:00 [INF] The configuration request was successfully validated.
2024-06-06 16:58:21.239 +08:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "form_post",
    "fragment",
    "query"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "authorization_response_iss_parameter_supported": true
}.
2024-06-06 16:58:21.241 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:44395/.well-known/openid-configuration - 200 1656 application/json;charset=UTF-8 4.2157ms
2024-06-06 16:58:21.283 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:44395/.well-known/jwks - null null
2024-06-06 16:58:21.283 +08:00 [INF] The request URI matched a server endpoint: "Cryptography".
2024-06-06 16:58:21.285 +08:00 [INF] The cryptography request was successfully extracted: {}.
2024-06-06 16:58:21.285 +08:00 [INF] The cryptography request was successfully validated.
2024-06-06 16:58:21.291 +08:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "7E1327FE418CCB7941E73E5534C81F4B29067381",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "xNiIySwMhF61-0NHyjwYh-QeJ7TyW8dKHGlofPURJcLT8NyDzlx4GgHq0Po-cYE80JMDl8k8u_hn3ve9QfKc-Jtgn2fXkUHNf6B9RdwrtT7JJewcfCQvLrcUXZ0WRNYqzTvJlUbBNTZ9wf1bkUo-F1XemH4fd5XPNou17bUJHvFX0Qmj_fOCwY3qxuRIZx371ArgUv-NryolOwjRkc71LZ-xrREGmAHTd8eHxzxnvoRuVSOMqt5Ef8oViTCRpw9x1DUEZO16Os7W6g8B57geqtI1oGfuKJZgZoJf9MAd0HrqjFhN9N0T2blU2STPBJcxn1m45V-QNmWbfUfwZ7fVrQ",
      "x5t": "fhMn_kGMy3lB5z5VNMgfSykGc4E",
      "x5c": [
        "MIIC9TCCAd2gAwIBAgIJANKENXHuDDIUMA0GCSqGSIb3DQEBCwUAMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwHhcNMjQwMzExMDYzNDEzWhcNMjYwMzExMDYzNDEzWjAwMS4wLAYDVQQDEyVPcGVuSWRkaWN0IFNlcnZlciBTaWduaW5nIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxNiIySwMhF61+0NHyjwYh+QeJ7TyW8dKHGlofPURJcLT8NyDzlx4GgHq0Po+cYE80JMDl8k8u/hn3ve9QfKc+Jtgn2fXkUHNf6B9RdwrtT7JJewcfCQvLrcUXZ0WRNYqzTvJlUbBNTZ9wf1bkUo+F1XemH4fd5XPNou17bUJHvFX0Qmj/fOCwY3qxuRIZx371ArgUv+NryolOwjRkc71LZ+xrREGmAHTd8eHxzxnvoRuVSOMqt5Ef8oViTCRpw9x1DUEZO16Os7W6g8B57geqtI1oGfuKJZgZoJf9MAd0HrqjFhN9N0T2blU2STPBJcxn1m45V+QNmWbfUfwZ7fVrQIDAQABoxIwEDAOBgNVHQ8BAf8EBAMCB4AwDQYJKoZIhvcNAQELBQADggEBAMLSbPS2wlMEGmGLrcNrCWIRomOLVLKuiOW0z/kFfz7i91//Orvdln4YE/nYZ4YcyRpx0QuzjE0y0SwcOmOeWK7ZhlDjZqqLep+cp3qbfMgvm5p2RtgKJXYkwqViKgdX+UgD+97RG0hYT02NQcYYy3yHCbDSuEwowKpikyns+nndMvfn/etazZ70LX8iRNNKKqOVwdy9IAiplqHBWDObfRldJS3eGdLXVAxaI9vyDJEsyD8ybHg5m4c4XG+ntXeS/XmLJOZhiPpIarQOZVIcxmssxthwF/tMV9YZ1ZlaN4zv4jfTnfSfM/RPz3IxVraFunwKic0TjzKl0nIBfq2IZ54="
      ]
    }
  ]
}.
2024-06-06 16:58:21.292 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 8.8432ms
2024-06-06 16:58:21.319 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 2165
2024-06-06 16:58:21.319 +08:00 [INF] The request URI matched a server endpoint: "Introspection".
2024-06-06 16:58:21.321 +08:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "token_type_hint": "access_token",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2024-06-06 16:58:21.326 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:21.355 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2024-06-06 16:58:21.361 +08:00 [INF] The introspection request was successfully validated.
2024-06-06 16:58:21.366 +08:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "username": "2410128587@qq.com",
  "sub": "62e84c99-c58f-4957-934b-b1ec0a177320",
  "scope": "openid profile email dataEventRecords offline_access",
  "jti": "7985caf9-6aeb-46f0-855f-1f74f47f0067",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "vueclient",
  "iat": 1717664299,
  "nbf": 1717664299,
  "exp": 1717667899,
  "aud": "rs_dataEventRecordsApi",
  "name": "2410128587@qq.com",
  "email": "2410128587@qq.com"
}.
2024-06-06 16:58:21.367 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 521 application/json;charset=UTF-8 48.1806ms
2024-06-06 16:58:22.033 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 2165
2024-06-06 16:58:22.034 +08:00 [INF] The request URI matched a server endpoint: "Introspection".
2024-06-06 16:58:22.034 +08:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "token_type_hint": "access_token",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2024-06-06 16:58:22.037 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:22.049 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2024-06-06 16:58:22.052 +08:00 [INF] The introspection request was successfully validated.
2024-06-06 16:58:22.053 +08:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "username": "2410128587@qq.com",
  "sub": "62e84c99-c58f-4957-934b-b1ec0a177320",
  "scope": "openid profile email dataEventRecords offline_access",
  "jti": "7985caf9-6aeb-46f0-855f-1f74f47f0067",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "vueclient",
  "iat": 1717664299,
  "nbf": 1717664299,
  "exp": 1717667899,
  "aud": "rs_dataEventRecordsApi",
  "name": "2410128587@qq.com",
  "email": "2410128587@qq.com"
}.
2024-06-06 16:58:22.054 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 521 application/json;charset=UTF-8 20.254ms
2024-06-06 16:58:22.105 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 2165
2024-06-06 16:58:22.106 +08:00 [INF] The request URI matched a server endpoint: "Introspection".
2024-06-06 16:58:22.107 +08:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "token_type_hint": "access_token",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2024-06-06 16:58:22.109 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:22.121 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2024-06-06 16:58:22.123 +08:00 [INF] The introspection request was successfully validated.
2024-06-06 16:58:22.124 +08:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "username": "2410128587@qq.com",
  "sub": "62e84c99-c58f-4957-934b-b1ec0a177320",
  "scope": "openid profile email dataEventRecords offline_access",
  "jti": "7985caf9-6aeb-46f0-855f-1f74f47f0067",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "vueclient",
  "iat": 1717664299,
  "nbf": 1717664299,
  "exp": 1717667899,
  "aud": "rs_dataEventRecordsApi",
  "name": "2410128587@qq.com",
  "email": "2410128587@qq.com"
}.
2024-06-06 16:58:22.125 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 521 application/json;charset=UTF-8 19.4297ms
2024-06-06 16:58:22.147 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 2165
2024-06-06 16:58:22.149 +08:00 [INF] The request URI matched a server endpoint: "Introspection".
2024-06-06 16:58:22.150 +08:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "token_type_hint": "access_token",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2024-06-06 16:58:22.152 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:22.162 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2024-06-06 16:58:22.164 +08:00 [INF] The introspection request was successfully validated.
2024-06-06 16:58:22.164 +08:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "username": "2410128587@qq.com",
  "sub": "62e84c99-c58f-4957-934b-b1ec0a177320",
  "scope": "openid profile email dataEventRecords offline_access",
  "jti": "7985caf9-6aeb-46f0-855f-1f74f47f0067",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "vueclient",
  "iat": 1717664299,
  "nbf": 1717664299,
  "exp": 1717667899,
  "aud": "rs_dataEventRecordsApi",
  "name": "2410128587@qq.com",
  "email": "2410128587@qq.com"
}.
2024-06-06 16:58:22.165 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 521 application/json;charset=UTF-8 18.1397ms
2024-06-06 16:58:22.172 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 2165
2024-06-06 16:58:22.172 +08:00 [INF] The request URI matched a server endpoint: "Introspection".
2024-06-06 16:58:22.173 +08:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "token_type_hint": "access_token",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2024-06-06 16:58:22.174 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 16:58:22.185 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2024-06-06 16:58:22.186 +08:00 [INF] The introspection request was successfully validated.
2024-06-06 16:58:22.186 +08:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "username": "2410128587@qq.com",
  "sub": "62e84c99-c58f-4957-934b-b1ec0a177320",
  "scope": "openid profile email dataEventRecords offline_access",
  "jti": "7985caf9-6aeb-46f0-855f-1f74f47f0067",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "vueclient",
  "iat": 1717664299,
  "nbf": 1717664299,
  "exp": 1717667899,
  "aud": "rs_dataEventRecordsApi",
  "name": "2410128587@qq.com",
  "email": "2410128587@qq.com"
}.
2024-06-06 16:58:22.187 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 521 application/json;charset=UTF-8 14.6832ms
2024-06-06 17:01:19.628 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2024-06-06 17:01:19.643 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2024-06-06 17:03:49.525 +08:00 [INF] User profile is available. Using 'C:\Users\Administrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-06 17:03:49.624 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-06-06 17:03:49.625 +08:00 [INF] Quartz Scheduler created
2024-06-06 17:03:49.626 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2024-06-06 17:03:49.626 +08:00 [INF] RAMJobStore initialized.
2024-06-06 17:03:49.626 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-06-06 17:03:49.626 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-06-06 17:03:49.627 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-06-06 17:03:49.634 +08:00 [INF] Adding 1 jobs, 1 triggers.
2024-06-06 17:03:49.635 +08:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2024-06-06 17:03:50.440 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-06-06 17:03:50.482 +08:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2024-06-06 17:03:50.712 +08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:03:50.785 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:03:50.787 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:03:50.788 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:03:50.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:03:50.805 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2024-06-06 17:03:51.187 +08:00 [INF] Now listening on: https://localhost:44395
2024-06-06 17:03:51.188 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-06 17:03:51.188 +08:00 [INF] Hosting environment: Development
2024-06-06 17:03:51.188 +08:00 [INF] Content root path: D:\Kuriyama\Study\Projects\oidc\OIDC\OpeniddictServer
2024-06-06 17:03:51.191 +08:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2024-06-06 17:04:38.363 +08:00 [INF] User profile is available. Using 'C:\Users\Administrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-06 17:04:38.468 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-06-06 17:04:38.469 +08:00 [INF] Quartz Scheduler created
2024-06-06 17:04:38.469 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2024-06-06 17:04:38.470 +08:00 [INF] RAMJobStore initialized.
2024-06-06 17:04:38.470 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-06-06 17:04:38.471 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-06-06 17:04:38.471 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-06-06 17:04:38.482 +08:00 [INF] Adding 1 jobs, 1 triggers.
2024-06-06 17:04:38.483 +08:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2024-06-06 17:04:39.501 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-06-06 17:04:39.541 +08:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2024-06-06 17:04:39.748 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:04:39.821 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:04:39.823 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:04:39.824 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:04:39.825 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:04:39.838 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2024-06-06 17:04:40.219 +08:00 [INF] Now listening on: https://localhost:44395
2024-06-06 17:04:40.219 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-06 17:04:40.220 +08:00 [INF] Hosting environment: Development
2024-06-06 17:04:40.220 +08:00 [INF] Content root path: D:\Kuriyama\Study\Projects\oidc\OIDC\OpeniddictServer
2024-06-06 17:04:40.222 +08:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2024-06-06 17:05:22.891 +08:00 [INF] User profile is available. Using 'C:\Users\Administrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-06 17:05:23.001 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-06-06 17:05:23.001 +08:00 [INF] Quartz Scheduler created
2024-06-06 17:05:23.002 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2024-06-06 17:05:23.003 +08:00 [INF] RAMJobStore initialized.
2024-06-06 17:05:23.004 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-06-06 17:05:23.004 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-06-06 17:05:23.005 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-06-06 17:05:23.018 +08:00 [INF] Adding 1 jobs, 1 triggers.
2024-06-06 17:05:23.019 +08:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2024-06-06 17:05:23.997 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-06-06 17:05:24.044 +08:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2024-06-06 17:05:24.240 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:05:24.321 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:05:24.323 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:05:24.324 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:05:24.324 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2024-06-06 17:05:24.338 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2024-06-06 17:05:24.746 +08:00 [INF] Now listening on: https://localhost:44395
2024-06-06 17:05:24.747 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-06 17:05:24.748 +08:00 [INF] Hosting environment: Development
2024-06-06 17:05:24.748 +08:00 [INF] Content root path: D:\Kuriyama\Study\Projects\oidc\OIDC\OpeniddictServer
2024-06-06 17:05:24.750 +08:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2024-06-06 17:08:48.824 +08:00 [INF] User profile is available. Using 'C:\Users\Administrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-06 17:08:48.917 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-06-06 17:08:48.920 +08:00 [INF] Quartz Scheduler created
2024-06-06 17:08:48.921 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2024-06-06 17:08:48.922 +08:00 [INF] RAMJobStore initialized.
2024-06-06 17:08:48.922 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-06-06 17:08:48.923 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-06-06 17:08:48.923 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-06-06 17:08:48.933 +08:00 [INF] Adding 1 jobs, 1 triggers.
2024-06-06 17:08:48.935 +08:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2024-06-06 17:08:49.890 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-06-06 17:08:49.932 +08:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
